

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Philadelphia Beerlytics, Part One - williamstome</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="williamstome">
<meta property="og:title" content="Philadelphia Beerlytics, Part One">


  <link rel="canonical" href="http://williamstome.github.io//philadelphia-beerlytics-part-one/">
  <meta property="og:url" content="http://williamstome.github.io//philadelphia-beerlytics-part-one/">



  <meta property="og:description" content="As a follow up to my previous Beerlytics posts, I wanted to take a look at what beers are actually on tap at the various bars in a particular city.">



  <meta name="twitter:site" content="@williamstome">
  <meta name="twitter:title" content="Philadelphia Beerlytics, Part One">
  <meta name="twitter:description" content="As a follow up to my previous Beerlytics posts, I wanted to take a look at what beers are actually on tap at the various bars in a particular city.">
  <meta name="twitter:url" content="http://williamstome.github.io//philadelphia-beerlytics-part-one/">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://williamstome.github.io//images/features/philly_beer.png">
  

  



  

  



  <meta property="og:image" content="http://williamstome.github.io//images/features/philly_beer.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2014-12-11T00:00:00+00:00">
  
    <link rel="next" href="http://williamstome.github.io//philadelphia-beerlytics-part-two-abv/" title="Philadelphia Beerlytics Part Two: ABV">
  
  
    <link rel="prev" href="http://williamstome.github.io//could-you-maybe-possibly-explain-indirect-speech-acts/" title="Could You Maybe Possibly Explain Indirect Speech Acts?">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Williams",
      "url" : "http://williamstome.github.io/",
      "sameAs" : ["https://twitter.com/williamstome","https://facebook.com/TomEWilliams","https://www.linkedin.com/in/williamstome","https://scholar.google.com/citations?user=qg_aiScAAAAJ","https://www.mendeley.com/profiles/tom-williams23/","https://www.researchgate.net/profile/Tom_Williams19"]
    }
  </script>






<!-- end SEO -->


<link href="http://williamstome.github.io//feed.xml" type="application/atom+xml" rel="alternate" title="williamstome Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://williamstome.github.io//assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://williamstome.github.io//">williamstome</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://williamstome.github.io//posts/">Archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://hrilab.tufts.edu/~twilliam/">Homepage</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://hrilab.tufts.edu/~twilliam/pdfs/cv.pdf">CV</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    


  









<div class="page__hero"
  style=" "
>
  
    <img src="http://williamstome.github.io//images/features/philly_beer.png" alt="Philadelphia Beerlytics, Part One" class="page__hero-image">
  
  
    <span class="page__hero-caption">Photo credit: <a href="http://www.flickr.com/photos/benjaminlhaas/3343152090"><strong>Benjamin L. Haas</strong></a>
</span>
  
</div>




<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://en.gravatar.com/userimage/26616054/e6f3322a7a49fe676683654ec3dbafce.jpg?size=200" alt="Tom Williams">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Tom Williams</h3>
    <p class="author__bio">Graduate Researcher in Artificial Intelligence and Human-Robot Interaction</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
      
        <li><a href="http://hrilab.tufts.edu/~twilliam"><i class="fa fa-fw fa-chain" aria-hidden="true"></i> Website</a></li>
      
      
        <li><a href="mailto:williams@cs.tufts.edu"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      
      
      
        <li><a href="https://twitter.com/williamstome"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
        <li><a href="https://www.facebook.com/TomEWilliams"><i class="fa fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
      
      
      
        <li><a href="https://www.linkedin.com/in/williamstome"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://www.youtube.com/user/HVj64bAL66gwgRjQKH-aFQ"><i class="fa fa-fw fa-youtube-square" aria-hidden="true"></i> YouTube</a></li>
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Philadelphia Beerlytics, Part One">
    <meta itemprop="description" content="As a follow up to my previous Beerlytics posts, I wanted to take a look at what beers are actually on tap at the various bars in a particular city.">
    <meta itemprop="datePublished" content="December 11, 2014">
    <meta itemprop="dateModified" content="December 13, 2014">

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Philadelphia Beerlytics, Part One
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <h1 id="the-data">The Data</h1>

<p>As a follow up to my
<a href="http://williamstome.github.io//high-density-beerlytics-data-visualization-of-beer-neighborhoods/">previous</a>
<a href="http://williamstome.github.io//beerlytics-bar-density/">Beerlytics
posts</a>, I
wanted to take a look at what beers are actually on tap at the various
bars in a particular city. Unfortunately, this information isn’t
readily available for most cities. Philadelphia, however, has
a wonderful website called <a href="http://www.phillytapfinder.com/">PhillyTapFinder</a>, which shows you
all the beers on tap at all the bars in Philadelphia. This shows that
Philadelphia has 1916 craft taps spread across 112 bars, with 795 unique
craft beers on tap. I made good use of this, scraping all the information from the site and then
cross-referencing it with data from <a href="http://www.ratebeer.com/">RateBeer</a>, which provides
information on beer ratings, ABV, IBU, Style, etc.</p>

<p>Before I go into the analysis, a few caveats:</p>

<ol>
  <li>All the information I’ve gathered is based on <em>taplists</em>, so
bottles are not counted. Thus the incredibly impressive and extensive
bottle lists of places like Monk’s Cafe are completely ignored. Sad.</li>
  <li>Philly Tap Finder only seems to include craft beer. This in and of
itself shouldn’t be terribly surprising, but it means that beers like
Miller Lite won’t show up anywhere on the lists, despite the fact that
Miller is probably on tap at a large number of the examined
bars. Low-craft beers like Stella, Hoegarden, and Shocktop <em>are</em> included.</li>
  <li>I don’t have any price information. If you want to find the
cheapest place to get drunk, you’re out of luck.</li>
  <li>I only have information from a single time slice (in October
2014), so I have no data on tap turnover. In the future I’ll hopefully
be able to repeat my scraping over regular intervals to get that kind
of information.</li>
</ol>

<h1 id="the-lists">The Lists</h1>

<p>I’ve organized my findings into a set of top- and bottom-ten
lists.</p>

<h2 id="the-best-and-the-worst">The Best and The Worst</h2>

<p>First things first, which bars have the best beer in Philadelphia?
Which have worst? To find out, I looked at the taplists for each bar
in Philadelphia. For each beer in that taplist, I got the average
rating for that beer on ratebeer. I then calculated the average
average-beer-rating for each bar. (Remember, macro-brews are not
included in these averages) Using this methodology, the top ten
beer bars are…</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Average beer rating: Top 10</th>
      <th style="text-align: right">Mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">The Beer Shoppe</td>
      <td style="text-align: right">3.65</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">Monks Cafe</td>
      <td style="text-align: right">3.65</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">320 Market Cafe</td>
      <td style="text-align: right">3.65</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Tria Rittenhouse Square</td>
      <td style="text-align: right">3.64</td>
    </tr>
    <tr>
      <td>5</td>
      <td style="text-align: left">Side Bar</td>
      <td style="text-align: right">3.61</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Tria Washington Square</td>
      <td style="text-align: right">3.60</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Moonshine</td>
      <td style="text-align: right">3.60</td>
    </tr>
    <tr>
      <td>8</td>
      <td style="text-align: left">Jose Pistola’s</td>
      <td style="text-align: right">3.60</td>
    </tr>
    <tr>
      <td>9</td>
      <td style="text-align: left">Bottles, Packs, Growlers</td>
      <td style="text-align: right">3.60</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Lucky’s Last Chance</td>
      <td style="text-align: right">3.59</td>
    </tr>
  </tbody>
</table>

<p>And the bottom ten are…</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Average beer rating: Bottom 10</th>
      <th style="text-align: right">Mean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>112</td>
      <td style="text-align: left">Daly’s Irish Pub</td>
      <td style="text-align: right">3.08</td>
    </tr>
    <tr>
      <td>111</td>
      <td style="text-align: left">The Victoria Freehouse</td>
      <td style="text-align: right">3.09</td>
    </tr>
    <tr>
      <td>110</td>
      <td style="text-align: left">Tatooed Mom</td>
      <td style="text-align: right">3.11</td>
    </tr>
    <tr>
      <td>109</td>
      <td style="text-align: left">Bourbon Branch</td>
      <td style="text-align: right">3.12</td>
    </tr>
    <tr>
      <td>108</td>
      <td style="text-align: left">The Whip Tavern</td>
      <td style="text-align: right">3.12</td>
    </tr>
    <tr>
      <td>107</td>
      <td style="text-align: left">McGillin’s Olde Ale House</td>
      <td style="text-align: right">3.13</td>
    </tr>
    <tr>
      <td>106</td>
      <td style="text-align: left">Glenmorgan bar</td>
      <td style="text-align: right">3.17</td>
    </tr>
    <tr>
      <td>105</td>
      <td style="text-align: left">Misconduct</td>
      <td style="text-align: right">3.17</td>
    </tr>
    <tr>
      <td>104</td>
      <td style="text-align: left">Doobie’s Bar</td>
      <td style="text-align: right">3.18</td>
    </tr>
    <tr>
      <td>103</td>
      <td style="text-align: left">Grey Lodge</td>
      <td style="text-align: right">3.20</td>
    </tr>
  </tbody>
</table>

<p>I’m not surprised at all to see Monks Cafe or Tria on the list of the
top ten. However, there are several on the list I’m not familiar
with. All the more reason to go back to Philadelphia! On the other
side of the coin, I’ve never heard of “Tatooed Mom” or “Misconduct”,
but I can’t say the names inspired any great confidence. I know
you shouldn’t judge a bar by it’s cover, but… Tatooed Mom? Really?
Looking at Tatooed Mom’s webpage reveals that they claim to have the
“the best local and regional beer”. While they do have a few good
beers on tap, their smallish taplist is padded out with the likes of
Shocktop and Newcastle. Okay, enough picking on Tatooed Mom.</p>

<h2 id="the-most-and-the-least">The Most and The Least</h2>

<p>So we know who has the best curated beer list. Who has the longest?
Sometimes size matters. Keep in mind that only taplists were counted,
and not bottle lists. This means that powerhouses like Monk’s Cafe
aren’t going to show up, despite the incredible selection afforded by
their bottle list. Remember as well that only craft taps are included.
<br />
The top 10…</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Number of Taps: Top 10</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">City Taphouse</td>
      <td style="text-align: right">54</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">Bar-ly Chinatown</td>
      <td style="text-align: right">53</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">Bru Craft &amp; Wurst</td>
      <td style="text-align: right">39</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Iron Abbey</td>
      <td style="text-align: right">37</td>
    </tr>
    <tr>
      <td>5</td>
      <td style="text-align: left">Field House</td>
      <td style="text-align: right">34</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Flanigan’s Boathouse</td>
      <td style="text-align: right">33</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Garret Hill Ale House</td>
      <td style="text-align: right">31</td>
    </tr>
    <tr>
      <td>8</td>
      <td style="text-align: left">The Pour House Exton</td>
      <td style="text-align: right">30</td>
    </tr>
    <tr>
      <td>9</td>
      <td style="text-align: left">Pitcher’s Pub</td>
      <td style="text-align: right">29</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Irish Pol</td>
      <td style="text-align: right">27</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Daly’s Irish Pub</td>
      <td style="text-align: right">27</td>
    </tr>
  </tbody>
</table>

<p>The bottom ten…</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Number of Taps: Bottom 10</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>112</td>
      <td style="text-align: left">Bobkat Liquors</td>
      <td style="text-align: right">5</td>
    </tr>
    <tr>
      <td>109</td>
      <td style="text-align: left">Nodding Head</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td>109</td>
      <td style="text-align: left">Wrap Shack</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td>109</td>
      <td style="text-align: left">Lucky’s Last Chance</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td>107</td>
      <td style="text-align: left">Watkins Drinkery</td>
      <td style="text-align: right">7</td>
    </tr>
    <tr>
      <td>107</td>
      <td style="text-align: left">The Beer Shoppe</td>
      <td style="text-align: right">7</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Glenmorgan Bar</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Billy Murphy’s Irish Saloon</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Redwood</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Cook and Shaker</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Royal Tavern</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Revolution House</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Tria - Washington Square</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td>98</td>
      <td style="text-align: left">Tria - Rittenhouse Square</td>
      <td style="text-align: right">8</td>
    </tr>
  </tbody>
</table>

<p>While none of the bars with the most taps appear on the top- or bottom-rated
lists, several of the bars with the fewest taps appear on the
top-rated list, and one appears on the bottom-rated list.</p>

<h2 id="variety-of-styles">Variety of Styles</h2>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Largest Variety of Styles</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">Bru Craft &amp; Wurst</td>
      <td style="text-align: right">29</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">Bar-ly Chinatown</td>
      <td style="text-align: right">28</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">Iron Abbey</td>
      <td style="text-align: right">27</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Pitcher’s Pub</td>
      <td style="text-align: right">22</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Flanigan’s Boathouse</td>
      <td style="text-align: right">22</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">The Pour House</td>
      <td style="text-align: right">21</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Field House</td>
      <td style="text-align: right">20</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Varga Bar</td>
      <td style="text-align: right">20</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">The Pour House Exton</td>
      <td style="text-align: right">20</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Capone’s</td>
      <td style="text-align: right">19</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Tria Taproom</td>
      <td style="text-align: right">19</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Isaac Newton’s</td>
      <td style="text-align: right">19</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Smallest Variety of Styles</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>112</td>
      <td style="text-align: left">Bobkat Liquors</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td>110</td>
      <td style="text-align: left">Lucky’s Last Chance</td>
      <td style="text-align: right">5</td>
    </tr>
    <tr>
      <td>110</td>
      <td style="text-align: left">Wrap Shack</td>
      <td style="text-align: right">5</td>
    </tr>
    <tr>
      <td>107</td>
      <td style="text-align: left">Billy Murphy’s Irish Saloon</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td>107</td>
      <td style="text-align: left">Tria Rittenhouse Square</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td>107</td>
      <td style="text-align: left">The Beer Shoppe</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td>103</td>
      <td style="text-align: left">Watkin’s Drinkery</td>
      <td style="text-align: right">7</td>
    </tr>
    <tr>
      <td>103</td>
      <td style="text-align: left">Franklin’s</td>
      <td style="text-align: right">7</td>
    </tr>
    <tr>
      <td>103</td>
      <td style="text-align: left">Royal Tavern</td>
      <td style="text-align: right">7</td>
    </tr>
    <tr>
      <td>103</td>
      <td style="text-align: left">Nodding Head</td>
      <td style="text-align: right">7</td>
    </tr>
  </tbody>
</table>

<p>You’ll notice that the bar with the most taps (City Taphouse) appears
nowhere on the first list. While it has 54 taps, those taps only
represent 15 different styles of beer. Which I find just a little
disappointing.</p>

<h2 id="popularity-of-styles">Popularity of Styles</h2>

<p>This leads to the next category: popularity of styles. Which styles are
the most common? I won’t bother listing the least common, as there
a very large number of styles with no examples on tap anywhere in the
city. For example, any kind of Sake. Here are the most common categories.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Most Common Styles</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">Spice-Herb-Vegetable</td>
      <td style="text-align: right">215</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">IPA</td>
      <td style="text-align: right">203</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">Oktoberfest/Marzen</td>
      <td style="text-align: right">105</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Witbier</td>
      <td style="text-align: right">88</td>
    </tr>
    <tr>
      <td>5</td>
      <td style="text-align: left">Imperial IPA</td>
      <td style="text-align: right">82</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">American Pale Ale</td>
      <td style="text-align: right">77</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Cider</td>
      <td style="text-align: right">72</td>
    </tr>
    <tr>
      <td>8</td>
      <td style="text-align: left">Saison</td>
      <td style="text-align: right">61</td>
    </tr>
    <tr>
      <td>9</td>
      <td style="text-align: left">Fruit Beer Radler</td>
      <td style="text-align: right">56</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Imperial Stout</td>
      <td style="text-align: right">53</td>
    </tr>
  </tbody>
</table>

<p>For more detail, consult the following interactive chart
(Hyper-categories are determined using the Ratebeer style guide, chart
designed using <a href="https://gist.github.com/metmajer/5480307">Sunburst</a> ):</p>

<style>
path {
  stroke: #fff;
  fill-rule: evenodd;
}
text{  
       font-family: Arial, sans-serif;
       font-size:10px;}
</style>

<div id="stylechart"></div>

<script src="http://d3js.org/d3.v3.min.js"></script>

<script>

var width = 600,
    height = 600,
    radius = Math.min(width, height) / 2;

var x = d3.scale.linear()
    .range([0, 2 * Math.PI]);

var y = d3.scale.linear()
    .range([0, radius]);

var color = d3.scale.category20c();

var svg = d3.select("div#stylechart").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + (height / 2) + ")");

var partition = d3.layout.partition()
    .value(function(d) { return d.size; });

var arc = d3.svg.arc()
    .startAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })
    .endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })
    .innerRadius(function(d) { return Math.max(0, y(d.y)); })
    .outerRadius(function(d) { return Math.max(0, y(d.y + d.dy)); });

d3.json("/flare.json", function(error, root) {
  var g = svg.selectAll("g")
      .data(partition.nodes(root))
    .enter().append("g");

  var path = g.append("path")
    .attr("d", arc)
    .style("fill", function(d) { return color((d.children ? d : d.parent).name); })
    .on("click", click);

  var text = g.append("text")
    .attr("transform", function(d) { return "rotate(" + computeTextRotation(d) + ")"; })
    .attr("x", function(d) { return y(d.y); })
    .attr("dx", "6") // margin
    .attr("dy", ".35em") // vertical-align
    .text(function(d) { return d.name; });

  function click(d) {
    // fade out all text elements
    text.transition().attr("opacity", 0);

    path.transition()
      .duration(750)
      .attrTween("d", arcTween(d))
      .each("end", function(e, i) {
          // check if the animated element's data e lies within the visible angle span given in d
          if (e.x >= d.x && e.x < (d.x + d.dx)) {
            // get a selection of the associated text element
            //var arcText = "testing"
            var arcText = d3.select(this.parentNode).select("text");
            // fade in the text element and recalculate positions
            arcText.transition().duration(750)
              .attr("opacity", 1)
              .attr("transform", function() { return "rotate(" + computeTextRotation(e) + ")" })
              .attr("x", function(d) { return y(d.y); });
          }
      });
  }
});

d3.select(self.frameElement).style("height", height + "px");

// Interpolate the scales!
function arcTween(d) {
  var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
      yd = d3.interpolate(y.domain(), [d.y, 1]),
      yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
  return function(d, i) {
    return i
        ? function(t) { return arc(d); }
        : function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); return arc(d); };
  };
}

function computeTextRotation(d) {
  return (x(d.x + d.dx / 2) - Math.PI / 2) / Math.PI * 180;
}

</script>

<div id="stylechart"></div>

<p><br /><br />
Some of these results genuinely surprised me. Keep in mind this data was gathered in
October, so pumpkin and Oktoberfest beers were in full force, as were
ciders. That being said, I didn’t think that the effects would have
been quite so prominent.</p>

<h2 id="most-common-beers">Most Common Beers</h2>

<p>Seeing how popular pumpkin beers were, for example, made me wonder
exactly which beers were the most common overall. Would it be more
pumpkin beers? Well, they’re certaintly up there:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Most Common Beers</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">Allagash White</td>
      <td style="text-align: right">39</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">Yuengling Lager</td>
      <td style="text-align: right">36</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">Southern Tier Pumking</td>
      <td style="text-align: right">31</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Guinness</td>
      <td style="text-align: right">20</td>
    </tr>
    <tr>
      <td>5</td>
      <td style="text-align: left">Yards Cape of Good Hope</td>
      <td style="text-align: right">18</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Dogfish Head Punkin Ale</td>
      <td style="text-align: right">17</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Firestone Walker Pivo Hoppy Pils</td>
      <td style="text-align: right">16</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Founders Breakfast Stout</td>
      <td style="text-align: right">16</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Founders Dark Penance</td>
      <td style="text-align: right">16</td>
    </tr>
    <tr>
      <td>7</td>
      <td style="text-align: left">Yards Philadelphia Pale Ale</td>
      <td style="text-align: right">16</td>
    </tr>
  </tbody>
</table>

<p>Here we see some standards: Yuengling (it’s Philly after all),
Guinness, and some other local brews (i.e., Yards). Then there are
some seasonal beers: Pumking and Punkin. I hope Allagash White is just
seasonally popular, but honestly it’s such a preferable choice to Blue
Moon or Shocktop that I’m not terribly upset. I <em>am</em> curious why the Pivo Pils and
the two Founders beers happen to be so commonly stocked. They’re great
beers, but I’m still a little curious why those particular beers are
so popular over, say, Sierra Nevada Pale Ale.</p>

<h2 id="unique-beers">Unique Beers</h2>

<p>Finally, I decided to look at what bars had beers you couldn’t get
anywhere else in Philadelphia. Specifically, by percentage of taps and
by number of taps. First, by percentage:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Bars with highest % of taps only available there</th>
      <th style="text-align: right">%</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">Nodding Head</td>
      <td style="text-align: right">71</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">The Trestle Inn</td>
      <td style="text-align: right">62</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">CJ’s Doghouse</td>
      <td style="text-align: right">58</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">Watkins Drinkery</td>
      <td style="text-align: right">57</td>
    </tr>
    <tr>
      <td>5</td>
      <td style="text-align: left">Bainbridge St. Barrel House</td>
      <td style="text-align: right">52</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Churchville inn</td>
      <td style="text-align: right">50</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Memphis Taproom</td>
      <td style="text-align: right">50</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Sancho Pistolas</td>
      <td style="text-align: right">50</td>
    </tr>
    <tr>
      <td>9</td>
      <td style="text-align: left">Tria Taproom</td>
      <td style="text-align: right">46</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">The Victoria Freehouse</td>
      <td style="text-align: right">45</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Varga Bar</td>
      <td style="text-align: right">45</td>
    </tr>
  </tbody>
</table>

<p>Things to note: Nodding head is a brewpub: they have such a high
percentage of unique beers because they brew their own stuff. But, as
far as I know, the other bars just have high percentages because
they’re well-curated… well… The Victoria Freehouse has 45% unique
beers, but they have the second lowest average average-beer-rating. So
you know where to go if you want low-rated beer you can’t find
anywhere else! Actually, that’s not entirely fair. The real truth is
they fancy themselves something of an English pub, and thus stock
plenty of hard-to-find beers from the British Isles. This is a cool
idea, but unfortunately a lot of British beer isn’t terribly well
rated as it tends to be rather weak and, well, uninteresting. That being
said, they actually have some pretty good roses among their thorns,
including several beers from J.W. Lees and Innis &amp; Gunn. I guess that
means you can’t judge a bar by it’s average rating. So much for this
post!</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">Bars with highest # of taps only available there</th>
      <th style="text-align: right">#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td style="text-align: left">City Tap House</td>
      <td style="text-align: right">16</td>
    </tr>
    <tr>
      <td>2</td>
      <td style="text-align: left">Bru Craft Wurst</td>
      <td style="text-align: right">15</td>
    </tr>
    <tr>
      <td>3</td>
      <td style="text-align: left">Bainbridge St. Barrel House</td>
      <td style="text-align: right">13</td>
    </tr>
    <tr>
      <td>4</td>
      <td style="text-align: left">McGillin’s Olde Ale House</td>
      <td style="text-align: right">12</td>
    </tr>
    <tr>
      <td>5</td>
      <td style="text-align: left">Tria Taproom</td>
      <td style="text-align: right">11</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Capone’s</td>
      <td style="text-align: right">10</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Churchville Inn</td>
      <td style="text-align: right">10</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Iron Abbey</td>
      <td style="text-align: right">10</td>
    </tr>
    <tr>
      <td>6</td>
      <td style="text-align: left">Varga Bar</td>
      <td style="text-align: right">10</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Bar-ly Chinatown</td>
      <td style="text-align: right">9</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Memphis Taproom</td>
      <td style="text-align: right">9</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">Moriarty’s Pub</td>
      <td style="text-align: right">9</td>
    </tr>
    <tr>
      <td>10</td>
      <td style="text-align: left">The Cambridge</td>
      <td style="text-align: right">9</td>
    </tr>
  </tbody>
</table>

<p>Looking at number of unique taps tells a
slightly different story. This isn’t terribly surprising: if you have
enough taps, hopefully you work some unique beers into the mix.</p>

<h1 id="for-next-time">For Next Time</h1>

<p>And that wraps up Part One of my analysis! I’ve got lots of cool
ideas for further analysis (fueled by reader suggestions) but haven’t
had time to look into them yet. For next time, I’ll hopefully be able
to look into:</p>

<ul>
  <li>Average ABV by bar</li>
  <li>Average IBU by bar</li>
  <li>Average average-beer-rating using /within-style rankings/</li>
  <li>Bars with the most local vs. domestic vs. foreign beer.</li>
  <li>Maps, Maps, Maps!</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://williamstome.github.io//tags/beer" class="page__taxonomy-item" rel="tag">beer</a><span class="sep">, </span>
    
      
      
      <a href="http://williamstome.github.io//tags/data" class="page__taxonomy-item" rel="tag">data</a><span class="sep">, </span>
    
      
      
      <a href="http://williamstome.github.io//tags/visualization" class="page__taxonomy-item" rel="tag">visualization</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2014-12-13">December 13, 2014</time></p>
        
      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=http://williamstome.github.io//philadelphia-beerlytics-part-one/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://williamstome.github.io//philadelphia-beerlytics-part-one/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http://williamstome.github.io//philadelphia-beerlytics-part-one/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://williamstome.github.io//philadelphia-beerlytics-part-one/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="http://williamstome.github.io//could-you-maybe-possibly-explain-indirect-speech-acts/" class="pagination--pager" title="Could You Maybe Possibly Explain Indirect Speech Acts?
">Previous</a>
    
    
      <a href="http://williamstome.github.io//philadelphia-beerlytics-part-two-abv/" class="pagination--pager" title="Philadelphia Beerlytics Part Two: ABV
">Next</a>
    
  </nav>

    </div>

    
      

<div class="page__comments">
  <h4 class="page__comments-title">Leave a Comment</h4>
  
    <section id="disqus_thread"></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  
    <a href="http://williamstome.github.io//summer-2016-visiting-the-university-of-bremen-part-2/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Summer 2016: Visiting the University of Bremen [Part 2]
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">An American in Bremen
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="http://williamstome.github.io//summer-2016-visiting-the-university-of-bremen-part-1/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Summer 2016: Visiting the University of Bremen
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">Auf Wiedersehen Amerika, Hallo Deutschland!
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="http://williamstome.github.io//love-and-sex-with-robots-a-retrospective-through-science-and-science-fiction/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Love and Sex With Robots: A Retrospective Through Science and Science Fiction
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">In this blog post, I’ll provide some of my thoughts on David Levy’s “Love and Sex with Robots”, and provide some commentary from recent science and science f...</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="http://williamstome.github.io//off-to-hri-2016/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Five Reasons Why I’m Excited for HRI 2016
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">I’m headed to New Zealand!
</p>
    </article>
  </a>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/williamstome"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
      <li><a href="https://facebook.com/TomEWilliams"><i class="fa fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
    
    
    
    <li><a href="http://williamstome.github.io//feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2016 Tom Williams. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="http://williamstome.github.io//assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-43501910-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'tomWT';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






  </body>
</html>

